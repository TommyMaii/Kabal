<!DOCTYPE html>

<html>

    <head>

        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="model.js"></script>
        <link rel="stylesheet" href="style.css">
        <title>Kabal</title>
    

    </head>

    <body>

        <div id="app">
            <!--Dekk Topp Venstre, Høyre 4 kort stacks på samme rad -->
            <!--Under er 7 rader med kort, økende fra venstre til høyre 1-7 kort stacks-->
            <!--Bare opperste kortet er visible -->
            <!--Logikk som fanner ut 3 kort -->
            <!--Sette opp bilder for kort -->
            <!--Kort logikk, angi ID -->
            <!--Sette opp win condition -->
            <!--Sette opp funksjoner som: Flytte på kort der det er valid,-->
            <!--Sette opp kort animasjoner, card flip, spre ut kort -->
            <!--28 cards outside and 24 cards in maindeck-->

            <div id="topRow">
            </div>
            <div id="bottomRow" class="Row"></div>


        </div>

        <script>
            //Model
           let count = 0;


            //View
            generateCardColumns();
            updateView();
            function updateView(){
                // createTopColumnsHTML();
                createBottomColumnsHTML();
            }

            // function createTopColumnsHTML(){
            //     let topRowHTML = document.getElementById("topRow");
            //     let length = cardStructure[0].row1.length;
            //     let tempString;
            //     for(i = 0; i < length; i++){
            //         let cardSuit = cardStructure[0].row1[i].cardSuit;
            //         let cardValue = cardStructure[0].row1[i].cardValue;
            //         playedCards.push(cardValue + "_of_" + cardSuit);
            //         tempString = `<div><div id="deckCard${i+1}"><img src="../images/${playedCards[i]}.png" width="135" height="225" onclick="swapCards(this)"></div></div>`
            //         topRowHTML.innerHTML += tempString;
            //     }

            //     for(i = 0; i < 4; i++){
            //         let cardSuit = cardStructure[1].row2[i].cardSuit;
            //         let cardValue = cardStructure[1].row2[i].cardValue;
            //         let blankCard = cardValue + "_of_" + cardSuit;
            //         tempString = `<div><div id="S${i+1}"><img src="../images/${blankCard}.png" width="185" height="265" onclick="swapCards(this)"></div></div>`
            //         topRowHTML.innerHTML += tempString;
            //     }

            // }

            function createBottomColumnsHTML(){
                let tempString = '';
                let count = 0;
                for(i = 0; i < 7; i++){
                    let className = 1; 
                    tempString += `<div class="Column" id="${'column'+(i+1)}">`
                    for(y= 0; y <= i; y++){
                    if(checkDuplicateCards(count)){}
                    getCurrentCard(count);
                    count += 1;
                    tempString += `<div class="layer${className++}"><img src="../images/${currentCard}.png" width="135" height="225" onclick="swapCards(this)"></div>`  
                    }
                    tempString += `</div>`
                }
                document.getElementById("bottomRow").innerHTML = tempString;
            }



            // function createTopColumnsHTML(){

            //     let tempString;
            //     let index1 =+ 1;
            //     for(i = 0; i < 3; i++){
            //         getCurrentCard(i)
            //         playedCards.push(currentCard);
            //         tempString = `<div><div id="deckCard${i+1}"><img src="../images/${playedCards[i]}.png" width="135" height="225" onclick="swapCards(this)"></div></div>`                    
            //         document.getElementById("topRow").innerHTML += tempString;
            //     }
            //     count = 0;
            //     for(i = 0; i < 4; i++){
            //         getCurrentCard(i)
            //         playedCards.push(currentCard);
            //         tempString = `<div id="S${i+1}"><img class="Maindeck container" src="../images/BlankPlayingCard.png" width="185" height="265"></div>`                    
            //         document.getElementById("topRow").innerHTML += tempString;
            //     }
            //     count = 0;
            // }

            //Controller
            function generateCardColumns(){
                for(i = 0; i < 7; i++){
                    let rowList = [];
                    for(y= 0; y <= i; y++){
                    let count = 0;
                    count++;
                    let obj = {}
                    obj['cardSuit'] = Math.floor(Math.random() * 4);
                    obj['cardValue'] = Math.floor(Math.random() * 13);
                    obj['isShown'] = true;
                    rowList.push(obj);
                    playedCards.push(obj);
                }
                cardStructure['row'+(i+1)] = rowList;
            }
            }

            function swapCards(element){
                
            }

            function checkDuplicateCards(index){
                card = JSON.stringify(playedCards[index]);
                if(playedCards.includes(card)){
                    console.log("duplicate found")
                    return true
                }
                    return false;

            }

            function getCurrentCard(index){
                cardValues = cardValue[playedCards[index].cardValue];
                cardSuits = cardSuit[playedCards[index].cardSuit];
                return currentCard = cardValues + '_of_' + cardSuits;
            }



        </script>
        
    </body>

</html>